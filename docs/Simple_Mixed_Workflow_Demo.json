{
  "format": "pedantic-workflow-v1",
  "metadata": {
    "name": "Simple Mixed Python TypeScript Demo",
    "description": "Working demo of Python and TypeScript collaboration",
    "tags": ["demo", "mixed-languages", "working"],
    "exportedAt": "2025-11-28T15:26:00.000Z",
    "version": "1.0.0"
  },
  "workflow": {
    "nodes": {
      "start": {
        "type": "start",
        "title": "Start",
        "position": { "x": 100, "y": 100 }
      },
      "python_data_generator": {
        "type": "python",
        "title": "Python Data Generator",
        "code": "import json\nimport random\nfrom datetime import datetime\n\ndef run(input):\n    # Generate sample e-commerce data\n    products = ['laptop', 'mouse', 'keyboard', 'monitor', 'headphones']\n    \n    orders = []\n    for i in range(5):\n        order = {\n            'id': f'ORD-{1000 + i}',\n            'product': random.choice(products),\n            'quantity': random.randint(1, 3),\n            'price': round(random.uniform(50.0, 500.0), 2),\n            'customer_id': f'CUST-{random.randint(100, 999)}',\n            'timestamp': datetime.now().isoformat()\n        }\n        orders.append(order)\n    \n    return {\n        'orders': orders,\n        'total_orders': len(orders),\n        'generated_at': datetime.now().isoformat(),\n        'generator': 'Python'\n    }",
        "position": { "x": 300, "y": 100 }
      },
      "typescript_processor": {
        "type": "typescript",
        "title": "TypeScript Analytics",
        "code": "async function run(input) {\n  const orders = input.orders || [];\n  \n  // Calculate analytics using TypeScript\n  const totalRevenue = orders.reduce((sum, order) => sum + (order.price * order.quantity), 0);\n  const averageOrderValue = orders.length > 0 ? totalRevenue / orders.length : 0;\n  \n  // Find top product\n  const productCounts = {};\n  orders.forEach(order => {\n    productCounts[order.product] = (productCounts[order.product] || 0) + order.quantity;\n  });\n  \n  const topProduct = Object.entries(productCounts)\n    .sort(([,a], [,b]) => b - a)[0]?.[0] || 'none';\n  \n  return {\n    orders,\n    analytics: {\n      totalRevenue: Math.round(totalRevenue * 100) / 100,\n      averageOrderValue: Math.round(averageOrderValue * 100) / 100,\n      topProduct,\n      customerCount: new Set(orders.map(o => o.customer_id)).size,\n      summary: `Processed ${orders.length} orders, $${totalRevenue.toFixed(2)} total revenue`\n    },\n    processedBy: 'TypeScript',\n    processedAt: new Date().toISOString()\n  };\n}",
        "position": { "x": 500, "y": 100 }
      },
      "python_finalizer": {
        "type": "python",
        "title": "Python Report Finalizer",
        "code": "import json\nfrom datetime import datetime\n\ndef run(input):\n    analytics = input.get('analytics', {})\n    orders = input.get('orders', [])\n    \n    # Create comprehensive summary\n    summary = {\n        'demo_complete': True,\n        'languages_demonstrated': ['Python', 'TypeScript'],\n        'processing_chain': 'Start → Python (Generate) → TypeScript (Analyze) → Python (Finalize)',\n        'sample_data': {\n            'order_count': len(orders),\n            'total_revenue': analytics.get('totalRevenue', 0),\n            'top_product': analytics.get('topProduct', 'N/A')\n        },\n        'execution_success': 'Mixed language workflow completed successfully!',\n        'timestamp': datetime.now().isoformat()\n    }\n    \n    return summary",
        "position": { "x": 700, "y": 100 }
      },
      "end": {
        "type": "end",
        "title": "End",
        "position": { "x": 900, "y": 100 }
      }
    },
    "connections": {
      "start_python_data_generator": {
        "source": "start",
        "target": "python_data_generator",
        "sourceOutput": "output",
        "targetInput": "input"
      },
      "python_data_generator_typescript_processor": {
        "source": "python_data_generator",
        "target": "typescript_processor",
        "sourceOutput": "output",
        "targetInput": "input"
      },
      "typescript_processor_python_finalizer": {
        "source": "typescript_processor",
        "target": "python_finalizer",
        "sourceOutput": "output",
        "targetInput": "input"
      },
      "python_finalizer_end": {
        "source": "python_finalizer",
        "target": "end",
        "sourceOutput": "output",
        "targetInput": "input"
      }
    },
    "metadata": {
      "nodeCount": 5,
      "lastModified": "2025-11-28T15:26:00.000Z"
    }
  }
}